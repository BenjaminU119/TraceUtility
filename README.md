# TraceUtility

A proof of concept on how to extract data from .trace documents generated by Instruments, using the undocumented frameworks shipped with Instruments.

We need to link against these frameworks:

* `/Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework`
* `/Applications/Xcode.app/Contents/SharedFrameworks/DVTInstrumentsFoundation.framework`
* `/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsPlugIn.framework`
* `/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsKit.framework`

Instrument templates used by the app are packages in `/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/Packages` and plugins in `/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns`.

It seems Apple is migrating from `PlugIns` to `Packages`. For example, the instrument `Time Profile` in `PlugIns/SamplerPlugin.xrplugin` is deprecated in Xcode 8 and there is a new version in `Packages/Sampling.instrdst`.

This project contains these example routines:

* **Time Profiler**: print out all functions in descending order of self execution time.
* **Allocations**: print out the memory allocated during each second in descending order of the size.
* **Core Animation**: print out all FPS data samples.
* **Connections**: print out all connections.
* **Energy Usage Log**: print out all energy usage level data.

They are not all of the templates included in Instruments. However, it is well enough to demonstrate how to work with the data in several common structures, such as call trees, tables and streams.
